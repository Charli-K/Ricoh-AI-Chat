<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Chat - Ricoh</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="./ai-chat.css" />
</head>
<body>

  <header class="header">
    <div class="logo"><a href="index.html" style="cursor: pointer;"><img src="Ricoh_Logo.png" alt="Ricoh Logo" width="150"/></a></div>
    <div class="search-bar">
      <input type="search" placeholder="Search" />
    </div>
    <nav class="nav-menu">
      <button class="active">AI Chat</button>
      <button>Configuration</button>
    </nav>
    <div class="user-menu">sysadmin</div>
  </header>

  <div class="container">
    <button class="sidebar-toggle" id="sidebarToggle">
      <span class="toggle-icon">â—€</span>
    </button>
    
    <aside class="sidebar">
      <div class="menu-section">Chat History</div>
      <ul class="menu">
        <li class="active">Current Conversation</li>
        <li>Document Analysis - Dec 10</li>
        <li>Form Query - Dec 9</li>
        <li>Search Help - Dec 8</li>
      </ul>
    </aside>

    <main class="chat-main-content">
      <div class="chat-header">
        <h1>AI Assistant</h1>
        <div class="chat-actions">
          <button class="btn-secondary" onclick="clearChat()">Clear Chat</button>
          <button class="btn-secondary" onclick="exportChat()">Export</button>
          <label>Powered by Ricoh Hong Kong Limited </label> 
        </div>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="message assistant-message">
          <div class="message-avatar">ğŸ¤–</div>
          <div class="message-content">
            <div class="message-text">
              <p>Good to see you here.</p>
              <p>When you start using the <strong>Ricoh Hong Kong AI support</strong>, you agree to <strong>Ricoh's privacy and acknowledge</strong> that your information will be reported for follow-up and performance improvement. <a href="http://www.ricoh.com/privacy-policy" target="_blank">Privacy policy</a></p>
              <p>ç•¶æ‚¨é–‹å§‹ä½¿ç”¨Ricoh Hong Kong AIæ”¯æ´æ™‚ï¼Œå³è¡¨ç¤ºæ‚¨åŒæ„Ricohçš„éš±ç§æ¬Šä¸¦æ‰¿èªæ‚¨çš„è³‡è¨Šå°‡è¢«å ±å‘Šä»¥ä¾›å¾ŒçºŒè¿½è¹¤å’Œæ•ˆèƒ½æ”¹å–„ã€‚ç›¸é—œè³‡è¨Šè¨˜éŒ„åœ¨éš±ç§æ”¿ç­–ä¸­ã€‚ç›¸é—œæ–¼éš±ç§æ”¿ç­–: <a href="http://www.ricoh.com/zh-tw/int/privacy-policy" target="_blank">http://www.ricoh.com/zh-tw/int/privacy-policy</a></p>
              <div class="message-actions">
                <button class="btn-accept" onclick="acceptPolicy()">Accept</button>
                <button class="btn-reject" onclick="rejectPolicy()">Reject</button>
              </div>
            </div>
            <div class="message-time">Just now</div>
          </div>
        </div>
      </div>

      <div class="chat-input-container">
        <div class="chat-input-wrapper">
          <button class="btn-icon" onclick="document.getElementById('fileUpload').click()" title="Attach file">
            ğŸ“
          </button>
          <input type="file" id="fileUpload" style="display: none;" onchange="handleFileUpload(event)" multiple />
          
          <button class="btn-icon" onclick="openKnowledgeBaseModal()" title="Select Knowledge Bases">
            ğŸ“š
          </button>
          
          <textarea 
            id="messageInput" 
            class="message-input" 
            placeholder="Type a message..." 
            rows="1"
            onkeydown="handleKeyDown(event)"
          ></textarea>
          
          <button class="btn-send" onclick="sendMessage()" title="Send message">
            â¤
          </button>
        </div>
        
        <div class="file-preview-area" id="filePreviewArea" style="display: none;"></div>
      </div>
    </main>
  </div>

  <div class="kb-modal" id="kbSelectionModal">
    <div class="kb-modal-overlay" onclick="closeKnowledgeBaseModal()"></div>
    <div class="kb-modal-content">
      <div class="kb-modal-header">
        <h2>Select Knowledge Bases</h2>
        <button class="kb-modal-close" onclick="closeKnowledgeBaseModal()">Ã—</button>
      </div>
      <div class="kb-modal-body">
        <p class="kb-modal-subtitle">Select which knowledge bases the AI should use for answering questions</p>
        <div class="kb-selection-list" id="kbSelectionList">
          <!-- Knowledge bases will be loaded here -->
        </div>
      </div>
      <div class="kb-modal-footer">
        <button class="btn-secondary" onclick="closeKnowledgeBaseModal()">Cancel</button>
        <button class="btn-primary" onclick="saveKnowledgeBaseSelection()">Apply Selection</button>
      </div>
    </div>
  </div>

  <script src="./ai-chat.js"></script>
</body>
</html>