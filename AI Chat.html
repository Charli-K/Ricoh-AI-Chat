<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Chat - Ricoh</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="./ai-chat.css" />
  <link rel="stylesheet" href="./dark-mode.css" />
</head>

<body>
  <section class="logo">
    <a href="index.html" style="cursor: pointer;"><img src="assets/Ricoh_Logo.svg" alt="Ricoh Logo" /></a>
  </section>
  
  <header class="header" id="mainHeader">
      <nav class="nav-menu">
        <button class="nav-btn" onclick="window.location.href='index.html'">
          <img src="assets/dashboard-svgrepo-com.svg" alt="Dashboard" width="30" />
          <span class="nav-text">Dashboard</span>
        </button>
        <button class="nav-btn" onclick="window.location.href='Knowledge_Bases.html'">
          <img src="assets/literature-book-knowledge-library-svgrepo-com.svg" alt="Knowledge Bases" width="30" />
          <span class="nav-text">Knowledge Bases</span>
        </button>
        <button class="nav-btn" onclick="window.location.href='AI Chat.html'">
          <img src="assets/chat-text-fill-svgrepo-com.svg" alt="AI Chat" width="30" />
          <span class="nav-text">AI Chat</span>
        </button>
        <button class="nav-btn">
          <img src="assets/setting-svgrepo-com.svg" alt="Configuration" width="30" />
          <span class="nav-text">Configuration</span>
        </button>
        <button class="nav-btn" onclick="window.location.href='#'">
          <img src="assets/article-story-report-piece-svgrepo-com.svg" alt="Report" width="30" />
          <span class="nav-text">Report</span>
        </button>
      </nav>
      <button class="theme-toggle" id="themeToggle" onclick="toggleDarkMode()">
        <span class="theme-icon"><img src="assets/moon-night-svgrepo-com.svg" alt="Toggle Theme" width="20" /></span>
        <span class="nav-text">Toggle Theme</span>
      </button>
      <div class="user-menu">
        <img src="assets/user-svgrepo-com.svg" alt="User Profile" width="30" />
        <span class="nav-text">Profile</span>
      </div>
      <button class="nav-btn" onclick="window.location.href='#'">
        <img src="assets/logout-svgrepo-com.svg" alt="Logout" width="30" />
        <span class="nav-text">Logout</span>
      </button>
    </header>

    <div class="container">
      <main class="chat-main-content">
        <div class="chat-header">
          <h1>AI Chat</h1>
          <div class="chat-actions">
            <button class="btn-secondary" onclick="clearChat()">Clear Chat</button>
            <button class="btn-secondary" onclick="exportChat()">Export</button>
            <label class="chat label" Powered by Ricoh Hong Kong Limited></label>
          </div>
        </div>
        <div class="chat-messages" id="chatMessages">
          <div class="message assistant-message">
            <div class="message-avatar"><img src="assets/bot-svgrepo-com.svg" alt="Assistant" width="30" /></div>
            <div class="message-content">
              <div class="message-text">
                <p>Good to see you here.</p>
                <p>When you start using the <strong>Ricoh Hong Kong AI support</strong>, you agree to <strong>Ricoh's
                    privacy and acknowledge</strong> that your information will be reported for follow-up and
                  performance improvement. <a href="https://www.ricoh.com.hk/en/privacy-policy" target="_blank">Privacy
                    policy</a></p>
                <p>當您開始使用Ricoh Hong Kong AI支援時，即表示您同意Ricoh的隱私權並承認您的資訊將被報告以供後續追蹤和效能改善。相關資訊記錄在隱私政策中。相關於隱私政策: <a
                    href="https://www.ricoh.com.hk/privacy-policy"
                    target="_blank">https://www.ricoh.com.hk/privacy-policy</a></p>
                <div class="message-actions">
                  <button class="btn-accept" onclick="acceptPolicy()">Accept</button>
                  <button class="btn-reject" onclick="rejectPolicy()">Reject</button>
                </div>
              </div>
              <div class="message-time"></div>
            </div>
          </div>
        </div>

        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <button class="btn-icon" onclick="document.getElementById('fileUpload').click()" title="Upload File">
              <img src="assets/upload-svgrepo-com.svg" alt="Upload File" width="20" />
            </button>
            <input type="file" id="fileUpload" style="display: none;" onchange="handleFileUpload(event)" multiple />
            <button class="btn-icon" onclick="openKnowledgeBaseModal()" title="Select Knowledge Bases">
              <img src="assets/literature-book-knowledge-library-svgrepo-com.svg" alt="Select Knowledge Bases" width="20" />
            </button>

            <textarea id="messageInput" class="message-input" placeholder="Type a message..." rows="1"
              onkeydown="handleKeyDown(event)"></textarea>

            <button class="btn-send" onclick="sendMessage()" title="Send message">
              <img src="assets/send-svgrepo-com.svg" alt="Send" width="25" />
            </button>
          </div>

          <div class="file-preview-area" id="filePreviewArea" style="display: none;"></div>
        </div>
      </main>
    </div>

    <div class="kb-modal" id="kbSelectionModal">
      <div class="kb-modal-overlay" onclick="closeKnowledgeBaseModal()"></div>
      <div class="kb-modal-content">
        <div class="kb-modal-header">
          <h2>Select Knowledge Bases</h2>
          <button class="kb-modal-close" onclick="closeKnowledgeBaseModal()">×</button>
        </div>
        <div class="kb-modal-body">
          <p class="kb-modal-subtitle">Select which knowledge bases the AI should use for answering questions</p>
          <div class="kb-selection-list" id="kbSelectionList">
          </div>
        </div>
        <div class="kb-modal-footer">
          <button class="btn-secondary" onclick="closeKnowledgeBaseModal()">Cancel</button>
          <button class="btn-primary" onclick="saveKnowledgeBaseSelection()">Apply Selection</button>
        </div>
      </div>
    </div>

    <script src="./ai-chat.js"></script>
  </body>

</html>